<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Jewellery Price Calculator</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        body {
            box-sizing: border-box;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 25%, #fff2a6 50%, #ffed4e 75%, #ffd700 100%);
            min-height: 100%;
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, #d4af37, #ffd700, #ffed4e);
        }
        
        .gold-shadow {
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
        }
        
        .jewel-sparkle {
            position: relative;
            overflow: hidden;
        }
        
        .jewel-sparkle::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.3) 50%, transparent 70%);
            transform: rotate(45deg);
            animation: sparkle 3s infinite;
        }
        
        @keyframes sparkle {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .diamond-icon {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb, #90caf9);
            clip-path: polygon(50% 0%, 0% 50%, 50% 100%, 100% 50%);
        }
    </style>
</head>

<body class="min-h-full p-4">
    <div class="max-w-4xl mx-auto">

        <!-- HEADER SECTION WITH LOGO -->
        <div class="text-center mb-8">

            <!-- LOGO -->
            <img src="{{ url_for('static', filename='logo.png') }}" 
                 alt="Logo" 
                 class="mx-auto mb-4 w-28 drop-shadow-lg">

            <div class="flex justify-center items-center mb-4">
                <div class="diamond-icon w-12 h-12 mr-4"></div>
                <h1 class="text-4xl font-bold text-amber-900">Gold Jewellery Price Calculator</h1>
                <div class="diamond-icon w-12 h-12 ml-4"></div>
            </div>

            <p class="text-amber-800 text-lg">Calculate the perfect price for your precious gold jewelry</p>
        </div>

        <!-- GRID SECTION -->
        <div class="grid lg:grid-cols-2 gap-8">

            <!-- FORM PANEL -->
            <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 gold-shadow jewel-sparkle">
                <h2 class="text-2xl font-bold text-amber-900 mb-6 text-center">üíé Jewelry Details</h2>
                
                <form id="calculatorForm" class="space-y-6">

                    <!-- Jewelry Type -->
                    <div>
                        <label class="block text-amber-800 font-semibold mb-2">üíç Jewelry Type</label>
                        <select id="jewelryType" class="w-full p-4 border-2 border-amber-200 rounded-xl bg-gradient-to-r from-amber-50 to-yellow-50 focus:border-amber-500">
                            <option value="">Select Jewelry Type</option>
                            <option value="ring">üíç Ring</option>
                            <option value="necklace">üìø Necklace</option>
                            <option value="earrings">üëÇ Earrings</option>
                            <option value="bracelet">üîó Bracelet</option>
                            <option value="chain">‚õìÔ∏è Chain</option>
                            <option value="pendant">üî∏ Pendant</option>
                            <option value="bangles">üí´ Bangles</option>
                            <option value="anklet">ü¶∂ Anklet</option>
                        </select>
                    </div>

                    <!-- Gold Rate -->
                    <div>
                        <label class="block text-amber-800 font-semibold mb-2">üí∞ Gold Rate (‚Çπ/gram)</label>
                        <input type="number" id="goldRate" class="w-full p-4 border-2 border-amber-200 rounded-xl bg-gradient-to-r from-amber-50 to-yellow-50 focus:border-amber-500">
                    </div>

                    <!-- Gold Carat -->
                    <div>
                        <label class="block text-amber-800 font-semibold mb-2">‚ú® Gold Carat</label>
                        <input type="number" id="goldCarat" class="w-full p-4 border-2 border-amber-200 rounded-xl bg-gradient-to-r from-amber-50 to-yellow-50 focus:border-amber-500">
                    </div>

                    <!-- Weight -->
                    <div>
                        <label class="block text-amber-800 font-semibold mb-2">‚öñÔ∏è Weight (grams)</label>
                        <input type="number" id="weight" step="0.01" class="w-full p-4 border-2 border-amber-200 rounded-xl bg-gradient-to-r from-amber-50 to-yellow-50 focus:border-amber-500">
                    </div>

                    <!-- Making Charges -->
                    <div>
                        <label class="block text-amber-800 font-semibold mb-2">üî® Making Charges (%)</label>
                        <input type="number" id="makingCharges" class="w-full p-4 border-2 border-amber-200 rounded-xl bg-gradient-to-r from-amber-50 to-yellow-50">
                    </div>

                    <!-- Wastage -->
                    <div>
                        <label class="block text-amber-800 font-semibold mb-2">üìâ Wastage (%)</label>
                        <input type="number" id="wastage" class="w-full p-4 border-2 border-amber-200 rounded-xl bg-gradient-to-r from-amber-50 to-yellow-50">
                    </div>

                    <!-- Button -->
                    <button type="submit" class="w-full gold-gradient text-white font-bold py-4 px-6 rounded-xl hover:scale-105 transition-all text-lg">
                        üßÆ Calculate Price
                    </button>
                </form>
            </div>

            <!-- RESULT PANEL -->
            <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 gold-shadow">
                <h2 class="text-2xl font-bold text-amber-900 mb-6 text-center">üíé Price Breakdown</h2>
                
                <div id="results" class="space-y-4 hidden">

                    <div class="bg-amber-100 p-4 rounded-xl border-l-4 border-amber-500 flex justify-between">
                        <span class="font-semibold text-amber-800">Base Gold Value:</span>
                        <span id="baseValue" class="font-bold text-amber-900">‚Çπ0</span>
                    </div>

                    <div class="bg-orange-100 p-4 rounded-xl border-l-4 border-orange-500 flex justify-between">
                        <span class="font-semibold text-orange-800">Making Charges:</span>
                        <span id="makingValue" class="font-bold text-orange-900">‚Çπ0</span>
                    </div>

                    <div class="bg-red-100 p-4 rounded-xl border-l-4 border-red-500 flex justify-between">
                        <span class="font-semibold text-red-800">Wastage Charges:</span>
                        <span id="wastageValue" class="font-bold text-red-900">‚Çπ0</span>
                    </div>

                    <div class="bg-green-100 p-6 rounded-xl border-2 border-green-500 gold-shadow flex justify-between">
                        <span class="text-green-800 font-bold text-xl">üí∞ Total Price:</span>
                        <span id="totalPrice" class="text-green-900 font-bold text-2xl">‚Çπ0</span>
                    </div>
                </div>

                <div id="noResults" class="text-center text-amber-600 py-12">
                    <div class="text-6xl mb-4">üíé</div>
                    <p>Fill in the details above to calculate the jewelry price</p>
                </div>

                <button id="downloadBtn" class="w-full mt-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-4 px-6 rounded-xl hover:scale-105 transition text-lg hidden">
                    üìÑ Download Receipt (PDF)
                </button>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="text-center mt-8 text-amber-800">
            <p class="text-sm">‚ú® Crafted with precision for your precious jewelry ‚ú®</p>
        </div>
    </div>

    <!-- JAVASCRIPT CALCULATOR -->
    <script>
        document.getElementById('calculatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const jewelryType = document.getElementById('jewelryType').value;
            const goldRate = parseFloat(document.getElementById('goldRate').value);
            const goldCarat = parseFloat(document.getElementById('goldCarat').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const makingCharges = parseFloat(document.getElementById('makingCharges').value) || 0;
            const wastage = parseFloat(document.getElementById('wastage').value) || 0;
            
            if (!jewelryType || !goldRate || !goldCarat || !weight) {
                alert('Please fill in all required fields');
                return;
            }
            
            const purityFactor = goldCarat / 24;
            const baseValue = goldRate * weight * purityFactor;
            const makingValue = (baseValue * makingCharges) / 100;
            const wastageValue = (baseValue * wastage) / 100;
            const totalPrice = baseValue + makingValue + wastageValue;

            document.getElementById('baseValue').textContent = `‚Çπ${baseValue.toLocaleString('en-IN',{maximumFractionDigits:2})}`;
            document.getElementById('makingValue').textContent = `‚Çπ${makingValue.toLocaleString('en-IN',{maximumFractionDigits:2})}`;
            document.getElementById('wastageValue').textContent = `‚Çπ${wastageValue.toLocaleString('en-IN',{maximumFractionDigits:2})}`;
            document.getElementById('totalPrice').textContent = `‚Çπ${totalPrice.toLocaleString('en-IN',{maximumFractionDigits:2})}`;

            document.getElementById('results').classList.remove('hidden');
            document.getElementById('noResults').classList.add('hidden');
            document.getElementById('downloadBtn').classList.remove('hidden');

            window.calculationData = {
                jewelryType,
                goldRate,
                goldCarat,
                weight,
                makingCharges,
                wastage,
                baseValue,
                makingValue,
                wastageValue,
                totalPrice
            };
        });

        document.getElementById('downloadBtn').addEventListener('click', function() {
            if (!window.calculationData) return;

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const d = window.calculationData;

            doc.setFontSize(20);
            doc.setTextColor(184, 134, 11);
            doc.text('Gold Jewellery Price Receipt', 20, 30);

            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 45);

            let y = 65;
            doc.text(`Jewelry Type: ${d.jewelryType}`, 20, y); y += 10;
            doc.text(`Gold Rate: ‚Çπ${d.goldRate}`, 20, y); y += 10;
            doc.text(`Gold Carat: ${d.goldCarat}K`, 20, y); y += 10;
            doc.text(`Weight: ${d.weight} g`, 20, y); y += 10;
            doc.text(`Making Charges: ${d.makingCharges}%`, 20, y); y += 10;
            doc.text(`Wastage: ${d.wastage}%`, 20, y);

            y += 20;
            doc.setFontSize(14);
            doc.text('Price Breakdown:', 20, y);

            y += 15;
            doc.setFontSize(12);
            doc.text(`Base Gold Value: ‚Çπ${d.baseValue.toLocaleString('en-IN',{maximumFractionDigits:2})}`, 20, y); y += 10;
            doc.text(`Making Charges: ‚Çπ${d.makingValue.toLocaleString('en-IN',{maximumFractionDigits:2})}`, 20, y); y += 10;
            doc.text(`Wastage Charges: ‚Çπ${d.wastageValue.toLocaleString('en-IN',{maximumFractionDigits:2})}`, 20, y);

            y += 20;
            doc.setFontSize(16);
            doc.setTextColor(34, 197, 94);
            doc.text(`Total Price: ‚Çπ${d.totalPrice.toLocaleString('en-IN',{maximumFractionDigits:2})}`, 20, y);

            doc.save('gold-jewelry-receipt.pdf');
        });
    </script>
</body>
</html>
